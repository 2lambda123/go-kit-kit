// Autogenerated code, do not change directly.
// To make changes to this file, please modify the templates at /gen-cmd/*.tmpl
package {{.Package}}

import (
    "golang.org/x/net/context"

    "github.com/go-kit/kit/endpoint"
)

{{$ret :=.ReturnExp}}
{{$args :=.ArgsExp}}
{{$compo :=.CompoExp}}


{{range .Functions}}

type {{.Name}}Request struct {
    {{range .Args}}{{.ToStructDef}}
    {{end}}
}

type {{.Name}}Response struct {
    {{range .Ret}}{{.ToStructDef}}
    {{end}}
}

func {{.Name}}Endpoint(ctx context.Context, request interface{}) (interface{}, error) {
    req, ok := request.({{.Name}}Request)
    if !ok {
        return nil, endpoint.ErrBadCast
    }
    {{call $ret .Ret}} := pure{{.Name}}(ctx, {{call $args "req" .Args}})
    if err != nil {
        return nil, err
    }
    return {{.Name}}Response{ {{call $compo .Ret}} }, nil
}

{{end}}


